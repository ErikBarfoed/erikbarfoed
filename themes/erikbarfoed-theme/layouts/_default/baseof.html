<!DOCTYPE html>
<html lang="da">
<head>
    {{ partial "head.html" . }}
</head>
<body>
    <div class="site-wrapper">
        {{ partial "header.html" . }}
        <main class="site-content">
            {{ block "main" . }}{{ end }}
        </main>
        {{ partial "footer.html" . }}
    </div>
    <div class="lightbox" id="lightbox">
        <img src="" alt="">
    </div>
    <script>
    (function() {
        var lb = document.getElementById('lightbox');
        var lbImg = lb.querySelector('img');

        function openLightbox(src, alt) {
            lbImg.src = src;
            lbImg.alt = alt || '';
            lb.classList.add('active');
        }

        lb.addEventListener('click', function() {
            lb.classList.remove('active');
        });

        // Lightbox for uddragsbilleder
        document.querySelectorAll('.excerpt-text img').forEach(function(img) {
            img.addEventListener('click', function() {
                openLightbox(this.src, this.alt);
            });
        });

        // Karrusel
        var slides = document.querySelectorAll('.carousel-slide');
        if (slides.length > 0) {
            var current = 0;
            var counter = document.querySelector('.carousel-counter');

            function showSlide(n) {
                slides[current].classList.remove('active');
                current = (n + slides.length) % slides.length;
                slides[current].classList.add('active');
                if (counter) counter.textContent = (current + 1) + ' / ' + slides.length;
            }

            var prev = document.querySelector('.carousel-prev');
            var next = document.querySelector('.carousel-next');
            if (prev) prev.addEventListener('click', function() { showSlide(current - 1); });
            if (next) next.addEventListener('click', function() { showSlide(current + 1); });

            // Lightbox for karruselbilleder
            slides.forEach(function(slide) {
                var img = slide.querySelector('img');
                if (img) img.addEventListener('click', function() {
                    openLightbox(this.src, this.alt);
                });
            });
        }
    })();
    </script>
</body>
</html>
